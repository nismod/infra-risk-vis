import { selector } from 'recoil';

import { ViewLayer } from '@/lib/data-map/view-layers';
import { truthyKeys } from '@/lib/helpers';

import { natureRasterViewLayer } from '@/config/natural-assets/nature-raster-layer';
import { natureVulnerabilitySelectionState } from '@/state/data-selection/nature-vulnerability';
import { sectionVisibilityState } from '@/state/sections';

export const natureVulnerabilityLayersState = selector<ViewLayer[]>({
  key: 'natureVulnerabilityLayersState',
  get: ({ get }) =>
    get(sectionVisibilityState('nature-vulnerability'))
      ? truthyKeys(get(natureVulnerabilitySelectionState)).map((type) => natureRasterViewLayer(type))
      : [],
});
