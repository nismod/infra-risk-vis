import { ToggleButton, ToggleButtonGroup } from '@mui/material';
import { useRecoilState } from 'recoil';

import { ParamDropdown } from '@/lib/controls/ParamDropdown';

import { HDI_REGION_LEVEL_LABELS, HDI_VARIABLE_LABELS, HdiVariableType } from '@/config/human-development/metadata';
import { InputSection } from '@/sidebar/ui/InputSection';
import { hdiRegionLevelState, hdiVariableState } from '@/state/data-selection/human-development';

export const HdiControl = () => {
  const [hdiVariable, setHdiVariable] = useRecoilState(hdiVariableState);
  const [regionLevel, setRegionLevel] = useRecoilState(hdiRegionLevelState);
  return (
    <>
      <InputSection>
        <ToggleButtonGroup exclusive value={regionLevel} onChange={(e, level) => setRegionLevel(level)} fullWidth>
          {HDI_REGION_LEVEL_LABELS.map(({ value, label }) => (
            <ToggleButton key={value} value={value} sx={{ textTransform: 'none' }}>
              {label}
            </ToggleButton>
          ))}
        </ToggleButtonGroup>
      </InputSection>
      <InputSection>
        <ParamDropdown<HdiVariableType>
          title="Index"
          value={hdiVariable}
          onChange={setHdiVariable}
          options={HDI_VARIABLE_LABELS}
        />
      </InputSection>
    </>
  );
};
